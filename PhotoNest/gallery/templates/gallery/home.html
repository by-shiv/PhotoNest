{% extends 'gallery/base.html' %}
{% block title %}
  All Photos | PhotoNest
{% endblock %}
{% block content %}
  <h2>Daily Highlights</h2>
  <div class="highlight-row">
    {% for img in highlights %}
      {% if img.image %}
        <div class="highlight-cell" style="background-image:url('{{ img.image.url }}');"></div>
      {% endif %}
    {% empty %}
      <div>No highlights yet!</div>
    {% endfor %}
  </div>
  <div class="images-month">
    {% for month, imgs in images_by_month.items %}
      <h3>{{ month }}</h3>
      <div class="image-grid">
        {% for img in imgs %}
          {% if img.image %}
            <div class="image-card" id="img-{{ img.id }}" style="background-image:url('{{ img.image.url }}');">
              <div class="card-actions">
                <!-- Star for favorite -->
                <form method="post" action="{% url 'toggle_favorite' img.id %}" style="display:inline;">
                  {% csrf_token %}
                  <button type="submit" class="fav-btn" title="Add to Favorites">
                    {% if img.favorite %}
                      <span style="color:gold;">&#9733;</span>
                    {% else %}
                      &#9733;
                    {% endif %}
                  </button>
                </form>
                <!-- Tick for more actions -->
                <button class="select-btn" title="Select" onclick="showImageMenu({{ img.id }})">&#10003;</button>
              </div>
            </div>
          {% endif %}
        {% endfor %}
      </div>
    {% endfor %}
  </div>
{% endblock %}
